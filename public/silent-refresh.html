<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Silent Refresh</title>
</head>
<body>
    <script>
        // Procesar el resultado del silent refresh y enviarlo al parent
        try {
            if (parent && parent.postMessage) {
                const hash = window.location.hash;
                const search = window.location.search;
                
                // ✅ Usar "*" porque frontend y Keycloak están en dominios diferentes
                parent.postMessage(hash || search, "*");
                
                console.log('Silent refresh: mensaje enviado con targetOrigin=*');
            }
        } catch (e) {
            console.error('Error en silent refresh:', e);
        }
    </script>
</body>
</html>