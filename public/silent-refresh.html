<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Silent Refresh</title>
</head>
<body>
    <script>
        (function() {
            console.log('üîÑ [SILENT-REFRESH] P√°gina cargada');
            console.log('üîÑ [SILENT-REFRESH] URL completa:', window.location.href);
            console.log('üîÑ [SILENT-REFRESH] Hash:', window.location.hash);
            console.log('üîÑ [SILENT-REFRESH] Search:', window.location.search);
            console.log('üîÑ [SILENT-REFRESH] Origin:', window.location.origin);
            
            try {
                if (!parent) {
                    console.error('‚ùå [SILENT-REFRESH] No hay parent window');
                    return;
                }
                
                if (!parent.postMessage) {
                    console.error('‚ùå [SILENT-REFRESH] parent.postMessage no existe');
                    return;
                }
                
                const hash = window.location.hash;
                const search = window.location.search;
                const message = hash || search;
                
                if (!message) {
                    console.warn('‚ö†Ô∏è [SILENT-REFRESH] No hay hash ni search para enviar');
                    return;
                }
                
                console.log('üì§ [SILENT-REFRESH] Enviando mensaje:', message);
                console.log('üì§ [SILENT-REFRESH] Target origin:', window.location.origin);
                
                // Enviar con origin espec√≠fico
                parent.postMessage(message, window.location.origin);
                
                console.log('‚úÖ [SILENT-REFRESH] Mensaje enviado correctamente');
                
                // Tambi√©n intentar con "*" como backup
                setTimeout(function() {
                    console.log('üì§ [SILENT-REFRESH] Reintentando con targetOrigin=*');
                    parent.postMessage(message, "*");
                }, 100);
                
            } catch (e) {
                console.error('üí• [SILENT-REFRESH] Error:', e);
            }
        })();
    </script>
</body>
</html>