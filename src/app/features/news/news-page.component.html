<div class="news-page">
  <app-breadcrumb [items]="breadcrumbItems"></app-breadcrumb>

  <app-page-header [title]="'PAGES.NEWS.SECTION_TITLE'"></app-page-header>

  <div class="container">
  
    <div class="loading-state" *ngIf="loading">
      <div class="loading-spinner">
        <div class="spinner"></div>
        <p>{{ 'COMMON.LOADING' | translate }}</p>
      </div>
    </div>

    <div class="error-state" *ngIf="error && !loading">
      <div class="error-message">
        <i class="fas fa-exclamation-triangle"></i>
        <h3>{{ 'LISTINGS.LOADING_ERROR' | translate }}</h3>
        <p>{{ error }}</p>
        <button class="btn btn-primary" (click)="ngOnInit()">
          {{ 'COMMON.RETRY' | translate }}
        </button>
      </div>
    </div>

    <div class="empty-state" *ngIf="!loading && !error && listings.length === 0">
      <div class="empty-message">
        <i class="fas fa-calendar-times"></i>
        <h3>{{ 'LISTINGS.NO_RESULTS' | translate }}</h3>
        <a routerLink="/" class="btn btn-primary">{{ 'COMMON.BACK_TO_HOME' | translate }}</a>
      </div>
    </div>
    
    <div class="listings-section" *ngIf="!loading && !error && listings.length > 0">

      <div class="listings-grid">
        <app-listing-card 
          *ngFor="let listing of listings; trackBy: trackByListing"
          [listing]="listing">
        </app-listing-card>
      </div>

      <app-pagination 
        *ngIf="totalPages > 1"
        [currentPage]="currentPage"
        [totalPages]="totalPages"
        [totalItems]="totalItems"
        [itemsPerPage]="itemsPerPage"
        (pageChange)="onPageChange($event)">
      </app-pagination>

    </div>
    
  </div>

</div>